@using faceitWebApp.Models
@inject NavigationManager NavigationManager

<div class="team-player-list-container">
    <h4 class="team-player-list-header">Players</h4>
    <div class="team-player-list">
        @{
            var sortedPlayers = Players.OrderByDescending(p => p.Elo).ToList();
            var columns = 2;
            var itemsPerColumn = (int)Math.Ceiling(sortedPlayers.Count / (double)columns);

            for (int i = 0; i < itemsPerColumn; i++)
            {
                for (int j = 0; j < columns; j++)
                {
                    var index = j * itemsPerColumn + i;
                    if (index < sortedPlayers.Count)
                    {
                        var player = sortedPlayers[index];
                        <div class="team-player-list-item" @onclick="() => NavigateToPlayerStats(player.Nickname)">
                            <span class="player-name">@player.Nickname</span>
                            <div class="elo-container">
                                <svg viewBox="0 0 24 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="elo-icon">
                                    <path
                                        d="M12 3c0 .463-.105.902-.292 1.293l1.998 2A2.97 2.97 0 0115 6a2.99 2.99 0 011.454.375l1.921-1.921a3 3 0 111.5 1.328l-2.093 2.093a3 3 0 11-5.49-.168l-1.999-2a2.992 2.992 0 01-2.418.074L5.782 7.876a3 3 0 11-1.328-1.5l1.921-1.921A3 3 0 1112 3z"
                                        fill="#ffffff"></path>
                                </svg>
                                <span class="elo-number">@player.Elo</span>
                            </div>
                        </div>
                    }
                }
            }
        }
    </div>
</div>

<style>
    .team-player-list-container {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid #fd7d27;
        border-radius: 10px;
        padding: 20px;
        width: 500px;
    }

    .team-player-list-header {
        color: #fd7d27;
        font-size: 2.5rem;
        text-align: center;
        margin-bottom: 20px;
        font-family: 'TolyerNo1', sans-serif;
        letter-spacing: 0.6px;
        padding-bottom: 10px;
        border-bottom: 3px solid #fd7d2780;
    }

    .team-player-list {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }

    .team-player-list-item {
        color: #ffffff;
        font-size: 1.4rem;
        font-family: 'TolyerNo1', sans-serif;
        padding: 8px;
        border-radius: 5px;
        transition: all 0.3s;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
    }

    .team-player-list-item:hover {
        background-color: rgba(255, 255, 255, 0.05);
    }

    .team-player-list-item:hover .player-name {
        text-decoration: underline;
        text-underline-offset: 4px;
        color: #fd7d27;
    }

    .player-name {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-right: 10px;
        font-size: 1.5rem;
        letter-spacing: 0.6px;
    }

    .elo-container {
        display: flex;
        align-items: center;
        gap: 5px;
        flex-shrink: 0;
    }

    .elo-icon {
        width: 24px;
        height: 24px;
    }

    .elo-number {
        color: #ffffff;
        font-size: 1.5rem;
        letter-spacing: 0.6px;
    }
</style>

@code {
    [Parameter]
    public List<TeamPlayer> Players { get; set; }

    private void NavigateToPlayerStats(string nickname)
    {
        NavigationManager.NavigateTo($"/player-league-stats/{Uri.EscapeDataString(nickname)}");
    }
}